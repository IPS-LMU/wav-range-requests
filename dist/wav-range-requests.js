var wavRangeRequests=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){e.exports=n(2).wrap(n(3)()),e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"numToString",(function(){return i}));var r=n(0),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function i(e){return e.toString()}!function(){o(this,void 0,void 0,(function(){var e,t,n,o,i,s,u;return a(this,(function(a){switch(a.label){case 0:return e=new URL("http://localhost:9000/please_call_stella.wav"),[4,new r.WavRangeReq];case 1:return[4,(t=a.sent()).setURL(e.href)];case 2:return a.sent(),[4,t.getWavFileInfo()];case 3:return n=a.sent(),console.log("fileInfo:"),console.log(n),[4,t.getRange(44100,441e3)];case 4:return o=a.sent(),console.log("wavRangeObj"),console.log(o),[4,new window.OfflineAudioContext(o.numberOfChannels,o.length,o.sampleRate).decodeAudioData(o.buffer)];case 5:return i=a.sent(),console.log(i),console.log(o.buffer),s=new Blob([o.buffer],{type:"audio/wav"}),u=window.URL.createObjectURL(s),console.log(u),[2]}}))}))}()},function(e,t,n){"use strict";n.r(t),n.d(t,"createEndpoint",(function(){return o})),n.d(t,"expose",(function(){return s})),n.d(t,"proxy",(function(){return p})),n.d(t,"proxyMarker",(function(){return r})),n.d(t,"transfer",(function(){return f})),n.d(t,"transferHandlers",(function(){return i})),n.d(t,"windowEndpoint",(function(){return d})),n.d(t,"wrap",(function(){return u}));const r=Symbol("Comlink.proxy"),o=Symbol("Comlink.endpoint"),a=new WeakSet,i=new Map([["proxy",{canHandle:e=>e&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return s(e,t),[n,[n]]},deserialize:e=>(e.start(),u(e))}],["throw",{canHandle:e=>a.has(e),serialize(e){const t=e instanceof Error;let n=e;return t&&(n={isError:t,message:e.message,stack:e.stack}),[n,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error,e);throw e}}]]);function s(e,t=self){t.addEventListener("message",async n=>{if(!n||!n.data)return;const{id:r,type:o,path:i}={path:[],...n.data},u=(n.data.argumentList||[]).map(b);let c;try{const t=i.slice(0,-1).reduce((e,t)=>e[t],e),r=i.reduce((e,t)=>e[t],e);switch(o){case 0:c=await r;break;case 1:t[i.slice(-1)[0]]=b(n.data.value),c=!0;break;case 2:c=await r.apply(t,u);break;case 3:c=p(await new r(...u));break;case 4:{const{port1:t,port2:n}=new MessageChannel;s(e,n),c=f(t,[t])}break;default:console.warn("Unrecognized message",n.data)}}catch(e){c=e,a.add(e)}const[l,d]=g(c);t.postMessage({...l,id:r},d)}),t.start&&t.start()}function u(e){return function e(t,n=[]){const r=new Proxy((function(){}),{get(o,a){if("then"===a){if(0===n.length)return{then:()=>r};const e=h(t,{type:0,path:n.map(e=>e.toString())}).then(b);return e.then.bind(e)}return e(t,[...n,a])},set(e,r,o){const[a,i]=g(o);return h(t,{type:1,path:[...n,r].map(e=>e.toString()),value:a},i).then(b)},apply(r,a,i){const s=n[n.length-1];if(s===o)return h(t,{type:4}).then(b);if("bind"===s)return e(t,n.slice(0,-1));const[u,l]=c(i);return h(t,{type:2,path:n.map(e=>e.toString()),argumentList:u},l).then(b)},construct(e,r){const[o,a]=c(r);return h(t,{type:3,path:n.map(e=>e.toString()),argumentList:o},a).then(b)}});return r}(e)}function c(e){const t=e.map(g);return[t.map(e=>e[0]),(n=t.map(e=>e[1]),Array.prototype.concat.apply([],n))];var n}const l=new WeakMap;function f(e,t){return l.set(e,t),e}function p(e){return Object.assign(e,{[r]:!0})}function d(e,t=self){return{postMessage:(t,n)=>e.postMessage(t,"*",n),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function g(e){for(const[t,n]of i)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:3,name:t,value:r},o]}return[{type:0,value:e},l.get(e)||[]]}function b(e){switch(e.type){case 3:return i.get(e.name).deserialize(e.value);case 0:return e.value}}function h(e,t,n){return new Promise(r=>{const o=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===o&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage({id:o,...t},n)})}},function(e,t,n){e.exports=function(){return new Worker(n.p+"9c1f9405db4e1bb467aa.worker.js")}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YXZSYW5nZVJlcXVlc3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dhdlJhbmdlUmVxdWVzdHMvLi9zcmMvd2F2cmFuZ2VyZXEud29ya2VyLnRzIiwid2VicGFjazovL3dhdlJhbmdlUmVxdWVzdHMvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vd2F2UmFuZ2VSZXF1ZXN0cy8uL25vZGVfbW9kdWxlcy9jb21saW5rL2Rpc3QvZXNtL2NvbWxpbmsubWpzIiwid2VicGFjazovL3dhdlJhbmdlUmVxdWVzdHMvLi9zcmMvd2F2cmFuZ2VyZXEud29ya2VyLnRzPzNjOWYiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ3cmFwIiwibnVtVG9TdHJpbmciLCJudW0iLCJ0b1N0cmluZyIsIndhdlVybCIsIlVSTCIsIndhdnJhbmdlcmVxIiwic2V0VVJMIiwiaHJlZiIsImdldFdhdkZpbGVJbmZvIiwiZmlsZUluZm8iLCJjb25zb2xlIiwibG9nIiwiZ2V0UmFuZ2UiLCJ3YXZSYW5nZU9iaiIsIndpbmRvdyIsIk9mZmxpbmVBdWRpb0NvbnRleHQiLCJudW1iZXJPZkNoYW5uZWxzIiwibGVuZ3RoIiwic2FtcGxlUmF0ZSIsImRlY29kZUF1ZGlvRGF0YSIsImJ1ZmZlciIsImF1ZGlvQnVmZmVyIiwiYmxvYiIsIkJsb2IiLCJ0eXBlIiwidXJsIiwiY3JlYXRlT2JqZWN0VVJMIiwiaW5pdCIsInByb3h5TWFya2VyIiwiY3JlYXRlRW5kcG9pbnQiLCJ0aHJvd1NldCIsIldlYWtTZXQiLCJ0cmFuc2ZlckhhbmRsZXJzIiwiTWFwIiwiY2FuSGFuZGxlIiwib2JqIiwicG9ydDEiLCJwb3J0MiIsIk1lc3NhZ2VDaGFubmVsIiwiZXhwb3NlIiwiZGVzZXJpYWxpemUiLCJwb3J0Iiwic3RhcnQiLCJoYXMiLCJpc0Vycm9yIiwiRXJyb3IiLCJzZXJpYWxpemVkIiwibWVzc2FnZSIsInN0YWNrIiwiYXNzaWduIiwiZXAiLCJzZWxmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2IiwiZGF0YSIsImlkIiwicGF0aCIsImFyZ3VtZW50TGlzdCIsIm1hcCIsImZyb21XaXJlVmFsdWUiLCJyZXR1cm5WYWx1ZSIsInBhcmVudCIsInNsaWNlIiwicmVkdWNlIiwicHJvcCIsInJhd1ZhbHVlIiwiYXBwbHkiLCJwcm94eSIsInRyYW5zZmVyIiwid2FybiIsImUiLCJhZGQiLCJ3aXJlVmFsdWUiLCJ0cmFuc2ZlcmFibGVzIiwidG9XaXJlVmFsdWUiLCJwb3N0TWVzc2FnZSIsImNyZWF0ZVByb3h5IiwiUHJveHkiLCJfdGFyZ2V0IiwidGhlbiIsInJlcXVlc3RSZXNwb25zZU1lc3NhZ2UiLCJfdGhpc0FyZyIsInJhd0FyZ3VtZW50TGlzdCIsImxhc3QiLCJwcm9jZXNzQXJndW1lbnRzIiwicHJvY2Vzc2VkIiwidiIsImFyciIsIkFycmF5IiwiY29uY2F0IiwidHJhbnNmZXJDYWNoZSIsIldlYWtNYXAiLCJ0cmFuc2ZlcnMiLCJzZXQiLCJ3aW5kb3dFbmRwb2ludCIsInciLCJjb250ZXh0IiwibXNnIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZXIiLCJzZXJpYWxpemVkVmFsdWUiLCJzZXJpYWxpemUiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZpbGwiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJOdW1iZXIiLCJNQVhf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cEYsRUFBRXFGLEdBQ2pDQSxFQUFHQyxNQUFTRCxFQUFHQyxLQUFLQyxJQUFNRixFQUFHQyxLQUFLQyxLQUFPQSxJQUc5Q0wsRUFBR2dELG9CQUFvQixVQUFXbEksR0FDbEN1SSxFQUFRbEQsRUFBR0MsVUFFWEosRUFBR1IsT0FDSFEsRUFBR1IsUUFFUFEsRUFBR3lCLFlBQVksQ0FBRXBCLFFBQU8wQyxHQUFPTCxPLGdCQzdPdkM5SCxFQUFPRCxRQUFVLFdBQ2YsT0FBTyxJQUFJa0osT0FBTyxJQUEwQiIsImZpbGUiOiJ3YXYtcmFuZ2UtcmVxdWVzdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2NvbWxpbmsnKS53cmFwKHJlcXVpcmUoXCIhd29ya2VyLWxvYWRlcj97fSEvaG9tZXMvcmFwaGFlbC9EZXZlbG9wZXIvd2F2LXJhbmdlLXJlcXVlc3RzL25vZGVfbW9kdWxlcy9jb21saW5rLWxvYWRlci9kaXN0L2NvbWxpbmstd29ya2VyLWxvYWRlci5qcyEvaG9tZXMvcmFwaGFlbC9EZXZlbG9wZXIvd2F2LXJhbmdlLXJlcXVlc3RzL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhL2hvbWVzL3JhcGhhZWwvRGV2ZWxvcGVyL3dhdi1yYW5nZS1yZXF1ZXN0cy9zcmMvd2F2cmFuZ2VyZXEud29ya2VyLnRzXCIpKCkpO21vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImltcG9ydCB7IFdhdlJhbmdlUmVxIH0gZnJvbSAnLi93YXZyYW5nZXJlcS53b3JrZXInO1xuXG5hc3luYyBmdW5jdGlvbiBpbml0KCl7XG4gIGNvbnN0IHdhdlVybCA9IG5ldyBVUkwoXCJodHRwOi8vbG9jYWxob3N0OjkwMDAvcGxlYXNlX2NhbGxfc3RlbGxhLndhdlwiKTtcbiAgLy8gY29uc3RydWN0IGNsYXNzXG4gIGNvbnN0IHdhdnJhbmdlcmVxID0gYXdhaXQgbmV3IFdhdlJhbmdlUmVxKCk7XG4gIFxuICAvLyB1c2luZyBzZXR0ZXIgZm9yIG5vd1xuICBhd2FpdCB3YXZyYW5nZXJlcS5zZXRVUkwod2F2VXJsLmhyZWYpO1xuICAvLyBnZXQgaW5mbyBhYm91dCB0aGUgd2F2IGZpbGUgKG1vc3QgaW1wb3J0YW50bHkgKVxuICBsZXQgZmlsZUluZm8gPSBhd2FpdCB3YXZyYW5nZXJlcS5nZXRXYXZGaWxlSW5mbygpO1xuICBjb25zb2xlLmxvZyhcImZpbGVJbmZvOlwiKTtcbiAgY29uc29sZS5sb2coZmlsZUluZm8pO1xuICBcbiAgbGV0IHdhdlJhbmdlT2JqID0gYXdhaXQgd2F2cmFuZ2VyZXEuZ2V0UmFuZ2UoNDQxMDAsIDQ0MTAwMCk7XG4gIGNvbnNvbGUubG9nKFwid2F2UmFuZ2VPYmpcIik7XG4gIGNvbnNvbGUubG9nKHdhdlJhbmdlT2JqKTtcbiAgXG4gIC8vIHBhcnNlIHJlcXVlc3RlZCByYW5nZVxuICBsZXQgb2ZmbGluZUN0eCA9IG5ldyB3aW5kb3cuT2ZmbGluZUF1ZGlvQ29udGV4dChcbiAgICB3YXZSYW5nZU9iai5udW1iZXJPZkNoYW5uZWxzLFxuICAgIHdhdlJhbmdlT2JqLmxlbmd0aCxcbiAgICB3YXZSYW5nZU9iai5zYW1wbGVSYXRlXG4gICk7XG4gIFxuICAvLyB0ZXN0IGRlY29kZSAodGhpcyBoYXMgdG8gYmUgZG9uZSBvbiB0aGUgbWFpbiB0aHJlYWQpXG4gIGxldCBhdWRpb0J1ZmZlcjogQXVkaW9CdWZmZXIgPSBhd2FpdCBvZmZsaW5lQ3R4LmRlY29kZUF1ZGlvRGF0YSh3YXZSYW5nZU9iai5idWZmZXIpO1xuICBjb25zb2xlLmxvZyhhdWRpb0J1ZmZlcik7XG4gIFxuICBcbiAgLy8gdGVzdCBhcHBlbmQgdG8gYXVkaW8gZWxlbWVudFxuICBjb25zb2xlLmxvZyh3YXZSYW5nZU9iai5idWZmZXIpO1xuICBjb25zdCBibG9iOiBCbG9iID0gbmV3IEJsb2IoW3dhdlJhbmdlT2JqLmJ1ZmZlcl0sIHsgdHlwZTogXCJhdWRpby93YXZcIiB9KTtcbiAgY29uc3QgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gIGNvbnNvbGUubG9nKHVybCk7XG4gIC8vIGNvbnN0IGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCB8IG51bGwgPSA8SFRNTEF1ZGlvRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF1ZGlvZWxcIik7IFxuICAvLyBhdWRpb0VsZW1lbnQuc3JjID0gdXJsO1xuXG59XG5cbmluaXQoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIG51bVRvU3RyaW5nKG51bTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuKG51bS50b1N0cmluZygpKTtcbn1cbiIsIi8qKlxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IHByb3h5TWFya2VyID0gU3ltYm9sKFwiQ29tbGluay5wcm94eVwiKTtcclxuY29uc3QgY3JlYXRlRW5kcG9pbnQgPSBTeW1ib2woXCJDb21saW5rLmVuZHBvaW50XCIpO1xyXG5jb25zdCB0aHJvd1NldCA9IG5ldyBXZWFrU2V0KCk7XHJcbmNvbnN0IHRyYW5zZmVySGFuZGxlcnMgPSBuZXcgTWFwKFtcclxuICAgIFtcclxuICAgICAgICBcInByb3h5XCIsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYW5IYW5kbGU6IG9iaiA9PiBvYmogJiYgb2JqW3Byb3h5TWFya2VyXSxcclxuICAgICAgICAgICAgc2VyaWFsaXplKG9iaikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xyXG4gICAgICAgICAgICAgICAgZXhwb3NlKG9iaiwgcG9ydDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtwb3J0MiwgW3BvcnQyXV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlc2VyaWFsaXplOiAocG9ydCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcG9ydC5zdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyYXAocG9ydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBdLFxyXG4gICAgW1xyXG4gICAgICAgIFwidGhyb3dcIixcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNhbkhhbmRsZTogb2JqID0+IHRocm93U2V0LmhhcyhvYmopLFxyXG4gICAgICAgICAgICBzZXJpYWxpemUob2JqKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0Vycm9yID0gb2JqIGluc3RhbmNlb2YgRXJyb3I7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VyaWFsaXplZCA9IG9iajtcclxuICAgICAgICAgICAgICAgIGlmIChpc0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VyaWFsaXplZCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogb2JqLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrOiBvYmouc3RhY2tcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtzZXJpYWxpemVkLCBbXV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlc2VyaWFsaXplKG9iaikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5pc0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoKSwgb2JqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRocm93IG9iajtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIF1cclxuXSk7XHJcbmZ1bmN0aW9uIGV4cG9zZShvYmosIGVwID0gc2VsZikge1xyXG4gICAgZXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGFzeW5jIChldikgPT4ge1xyXG4gICAgICAgIGlmICghZXYgfHwgIWV2LmRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGlkLCB0eXBlLCBwYXRoIH0gPSB7XHJcbiAgICAgICAgICAgIHBhdGg6IFtdLFxyXG4gICAgICAgICAgICAuLi5ldi5kYXRhXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBhcmd1bWVudExpc3QgPSAoZXYuZGF0YS5hcmd1bWVudExpc3QgfHwgW10pLm1hcChmcm9tV2lyZVZhbHVlKTtcclxuICAgICAgICBsZXQgcmV0dXJuVmFsdWU7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcGF0aC5zbGljZSgwLCAtMSkucmVkdWNlKChvYmosIHByb3ApID0+IG9ialtwcm9wXSwgb2JqKTtcclxuICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBwYXRoLnJlZHVjZSgob2JqLCBwcm9wKSA9PiBvYmpbcHJvcF0sIG9iaik7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwIC8qIEdFVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gYXdhaXQgcmF3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxIC8qIFNFVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFtwYXRoLnNsaWNlKC0xKVswXV0gPSBmcm9tV2lyZVZhbHVlKGV2LmRhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyIC8qIEFQUExZICovOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBhd2FpdCByYXdWYWx1ZS5hcHBseShwYXJlbnQsIGFyZ3VtZW50TGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzIC8qIENPTlNUUlVDVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgbmV3IHJhd1ZhbHVlKC4uLmFyZ3VtZW50TGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcHJveHkodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNCAvKiBFTkRQT0lOVCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcG9ydDEsIHBvcnQyIH0gPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3NlKG9iaiwgcG9ydDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRyYW5zZmVyKHBvcnQxLCBbcG9ydDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVucmVjb2duaXplZCBtZXNzYWdlXCIsIGV2LmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gZTtcclxuICAgICAgICAgICAgdGhyb3dTZXQuYWRkKGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBbd2lyZVZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJldHVyblZhbHVlKTtcclxuICAgICAgICBlcC5wb3N0TWVzc2FnZSh7IC4uLndpcmVWYWx1ZSwgaWQgfSwgdHJhbnNmZXJhYmxlcyk7XHJcbiAgICB9KSk7XHJcbiAgICBpZiAoZXAuc3RhcnQpIHtcclxuICAgICAgICBlcC5zdGFydCgpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHdyYXAoZXApIHtcclxuICAgIHJldHVybiBjcmVhdGVQcm94eShlcCk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlUHJveHkoZXAsIHBhdGggPSBbXSkge1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkoZnVuY3Rpb24gKCkgeyB9LCB7XHJcbiAgICAgICAgZ2V0KF90YXJnZXQsIHByb3ApIHtcclxuICAgICAgICAgICAgaWYgKHByb3AgPT09IFwidGhlblwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0aGVuOiAoKSA9PiBwcm94eSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIEdFVCAqLyxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLm1hcChwID0+IHAudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gci50aGVuLmJpbmQocik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBbLi4ucGF0aCwgcHJvcF0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0KF90YXJnZXQsIHByb3AsIHJhd1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIEZJWE1FOiBFUzYgUHJveHkgSGFuZGxlciBgc2V0YCBtZXRob2RzIGFyZSBzdXBwb3NlZCB0byByZXR1cm4gYVxyXG4gICAgICAgICAgICAvLyBib29sZWFuLiBUbyBzaG93IGdvb2Qgd2lsbCwgd2UgcmV0dXJuIHRydWUgYXN5bmNocm9ub3VzbHkgwq9cXF8o44OEKV8vwq9cclxuICAgICAgICAgICAgY29uc3QgW3ZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJhd1ZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogU0VUICovLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhdGgsIHByb3BdLm1hcChwID0+IHAudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZVxyXG4gICAgICAgICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXBwbHkoX3RhcmdldCwgX3RoaXNBcmcsIHJhd0FyZ3VtZW50TGlzdCkge1xyXG4gICAgICAgICAgICBjb25zdCBsYXN0ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICBpZiAobGFzdCA9PT0gY3JlYXRlRW5kcG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogNCAvKiBFTkRQT0lOVCAqL1xyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmcm9tV2lyZVZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBXZSBqdXN0IHByZXRlbmQgdGhhdCBgYmluZCgpYCBkaWRu4oCZdCBoYXBwZW4uXHJcbiAgICAgICAgICAgIGlmIChsYXN0ID09PSBcImJpbmRcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBwYXRoLnNsaWNlKDAsIC0xKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgW2FyZ3VtZW50TGlzdCwgdHJhbnNmZXJhYmxlc10gPSBwcm9jZXNzQXJndW1lbnRzKHJhd0FyZ3VtZW50TGlzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAyIC8qIEFQUExZICovLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAocCA9PiBwLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgYXJndW1lbnRMaXN0XHJcbiAgICAgICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb25zdHJ1Y3QoX3RhcmdldCwgcmF3QXJndW1lbnRMaXN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFthcmd1bWVudExpc3QsIHRyYW5zZmVyYWJsZXNdID0gcHJvY2Vzc0FyZ3VtZW50cyhyYXdBcmd1bWVudExpc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogMyAvKiBDT05TVFJVQ1QgKi8sXHJcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLm1hcChwID0+IHAudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICBhcmd1bWVudExpc3RcclxuICAgICAgICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBwcm94eTtcclxufVxyXG5mdW5jdGlvbiBteUZsYXQoYXJyKSB7XHJcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJyKTtcclxufVxyXG5mdW5jdGlvbiBwcm9jZXNzQXJndW1lbnRzKGFyZ3VtZW50TGlzdCkge1xyXG4gICAgY29uc3QgcHJvY2Vzc2VkID0gYXJndW1lbnRMaXN0Lm1hcCh0b1dpcmVWYWx1ZSk7XHJcbiAgICByZXR1cm4gW3Byb2Nlc3NlZC5tYXAodiA9PiB2WzBdKSwgbXlGbGF0KHByb2Nlc3NlZC5tYXAodiA9PiB2WzFdKSldO1xyXG59XHJcbmNvbnN0IHRyYW5zZmVyQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG5mdW5jdGlvbiB0cmFuc2ZlcihvYmosIHRyYW5zZmVycykge1xyXG4gICAgdHJhbnNmZXJDYWNoZS5zZXQob2JqLCB0cmFuc2ZlcnMpO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5mdW5jdGlvbiBwcm94eShvYmopIHtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwgeyBbcHJveHlNYXJrZXJdOiB0cnVlIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHdpbmRvd0VuZHBvaW50KHcsIGNvbnRleHQgPSBzZWxmKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHBvc3RNZXNzYWdlOiAobXNnLCB0cmFuc2ZlcmFibGVzKSA9PiB3LnBvc3RNZXNzYWdlKG1zZywgXCIqXCIsIHRyYW5zZmVyYWJsZXMpLFxyXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGNvbnRleHQuYWRkRXZlbnRMaXN0ZW5lci5iaW5kKGNvbnRleHQpLFxyXG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGNvbnRleHQucmVtb3ZlRXZlbnRMaXN0ZW5lci5iaW5kKGNvbnRleHQpXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHRvV2lyZVZhbHVlKHZhbHVlKSB7XHJcbiAgICBmb3IgKGNvbnN0IFtuYW1lLCBoYW5kbGVyXSBvZiB0cmFuc2ZlckhhbmRsZXJzKSB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIuY2FuSGFuZGxlKHZhbHVlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBbc2VyaWFsaXplZFZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IGhhbmRsZXIuc2VyaWFsaXplKHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAzIC8qIEhBTkRMRVIgKi8sXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VyaWFsaXplZFZhbHVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdHJhbnNmZXJhYmxlc1xyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiAwIC8qIFJBVyAqLyxcclxuICAgICAgICAgICAgdmFsdWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRyYW5zZmVyQ2FjaGUuZ2V0KHZhbHVlKSB8fCBbXVxyXG4gICAgXTtcclxufVxyXG5mdW5jdGlvbiBmcm9tV2lyZVZhbHVlKHZhbHVlKSB7XHJcbiAgICBzd2l0Y2ggKHZhbHVlLnR5cGUpIHtcclxuICAgICAgICBjYXNlIDMgLyogSEFORExFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVySGFuZGxlcnMuZ2V0KHZhbHVlLm5hbWUpLmRlc2VyaWFsaXplKHZhbHVlLnZhbHVlKTtcclxuICAgICAgICBjYXNlIDAgLyogUkFXICovOlxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudmFsdWU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgbXNnLCB0cmFuc2ZlcnMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBjb25zdCBpZCA9IGdlbmVyYXRlVVVJRCgpO1xyXG4gICAgICAgIGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIGwoZXYpIHtcclxuICAgICAgICAgICAgaWYgKCFldi5kYXRhIHx8ICFldi5kYXRhLmlkIHx8IGV2LmRhdGEuaWQgIT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoZXYuZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGVwLnN0YXJ0KSB7XHJcbiAgICAgICAgICAgIGVwLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVwLnBvc3RNZXNzYWdlKHsgaWQsIC4uLm1zZyB9LCB0cmFuc2ZlcnMpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKCkge1xyXG4gICAgcmV0dXJuIG5ldyBBcnJheSg0KVxyXG4gICAgICAgIC5maWxsKDApXHJcbiAgICAgICAgLm1hcCgoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikudG9TdHJpbmcoMTYpKVxyXG4gICAgICAgIC5qb2luKFwiLVwiKTtcclxufVxuXG5leHBvcnQgeyBjcmVhdGVFbmRwb2ludCwgZXhwb3NlLCBwcm94eSwgcHJveHlNYXJrZXIsIHRyYW5zZmVyLCB0cmFuc2ZlckhhbmRsZXJzLCB3aW5kb3dFbmRwb2ludCwgd3JhcCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbGluay5tanMubWFwXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFdvcmtlcihfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiOWMxZjk0MDVkYjRlMWJiNDY3YWEud29ya2VyLmpzXCIpO1xufTsiXSwic291cmNlUm9vdCI6IiJ9